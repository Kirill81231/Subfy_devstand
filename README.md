# SubFi â€” Telegram Mini App Ğ´Ğ»Ñ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¾Ğº

<p align="center">
  <img src="docs/logo.png" alt="SubFi Logo" width="120"/>
</p>

## ğŸ¯ Ğ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ

SubFi Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ²ÑĞµ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Ğ¼ĞµÑÑ‚Ğµ Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¾ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ¾ÑÑ‰Ğ¸Ñ… ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸ÑÑ….

### Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

- ğŸ“Š **Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ²** â€” Ğ² Ğ¼ĞµÑÑÑ†, Ğ½ĞµĞ´ĞµĞ»Ñ, Ğ³Ğ¾Ğ´
- ğŸ“… **ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğ¹** â€” Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ¼ĞµÑÑÑ†Ğ°Ğ¼
- ğŸ”” **Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ** â€” Ğ·Ğ° 3 Ğ´Ğ½Ñ Ğ¸ Ğ² Ğ´ĞµĞ½ÑŒ ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ
- ğŸ¨ **24 ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ°** Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ñ… Ñ€Ğ¾ÑÑĞ¸Ğ¹ÑĞºĞ¸Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² Ñ Ğ»Ğ¾Ğ³Ğ¾Ñ‚Ğ¸Ğ¿Ğ°Ğ¼Ğ¸
- ğŸ’¼ **ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸** â€” Ğ»ÑĞ±Ğ¾Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ Ñ Ğ»ÑĞ±Ğ¾Ğ¹ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒÑ
- ğŸŒ™ **Ğ¢Ñ‘Ğ¼Ğ½Ğ°Ñ/ÑĞ²ĞµÑ‚Ğ»Ğ°Ñ Ñ‚ĞµĞ¼Ğ°**

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Telegram Mini App                         â”‚
â”‚                    (React + TypeScript)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ HTTPS
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Supabase                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PostgreSQL â”‚  â”‚    Auth     â”‚  â”‚   Edge Functions    â”‚  â”‚
â”‚  â”‚   + RLS     â”‚  â”‚   (JWT)     â”‚  â”‚  - telegram-auth    â”‚  â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚  - send-notif       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    grammY Bot                                â”‚
â”‚              (Node.js + TypeScript)                          â”‚
â”‚         - /start, /stats, /settings                          â”‚
â”‚         - Webhook Ğ´Ğ»Ñ Telegram API                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Telegram Ğ±Ğ¾Ñ‚Ğ°

1. ĞĞ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ [@BotFather](https://t.me/BotFather) Ğ² Telegram
2. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ `/newbot` Ğ¸ ÑĞ»ĞµĞ´ÑƒĞ¹Ñ‚Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸ÑĞ¼
3. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚Ğµ Ñ‚Ğ¾ĞºĞµĞ½ Ğ±Ğ¾Ñ‚Ğ°
4. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ `/setmenubutton` â†’ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ±Ğ¾Ñ‚Ğ° â†’ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ URL Mini App

### 2. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Supabase

1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ½Ğ° [supabase.com](https://supabase.com)
2. ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚Ğµ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ:
   ```bash
   # Ğ’ Supabase Dashboard â†’ SQL Editor
   # Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ backend/supabase/migrations/001_initial_schema.sql
   ```
3. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Edge Functions:
   ```bash
   supabase functions deploy telegram-auth
   supabase functions deploy send-notifications
   ```
4. Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ ÑĞµĞºÑ€ĞµÑ‚Ñ‹:
   ```bash
   supabase secrets set TELEGRAM_BOT_TOKEN=your-token
   supabase secrets set JWT_SECRET=your-jwt-secret
   supabase secrets set CRON_SECRET=your-cron-secret
   ```

### 3. Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Mini App (Vercel)

1. Ğ¤Ğ¾Ñ€ĞºĞ½Ğ¸Ñ‚Ğµ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹
2. ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ Ğº Vercel
3. Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Environment Variables:
   - `VITE_SUPABASE_URL`
   - `VITE_SUPABASE_ANON_KEY`
   - `VITE_AUTH_ENDPOINT`
4. Deploy!

### 4. Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ±Ğ¾Ñ‚Ğ° (Railway)

1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ½Ğ° [railway.app](https://railway.app)
2. ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ Ğ¿Ğ°Ğ¿ĞºÑƒ `backend/bot`
3. Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Environment Variables Ğ¸Ğ· `.env.example`
4. Deploy!

### 5. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ (pg_cron)

Ğ’ Supabase SQL Editor:
```sql
-- Ğ•Ğ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ² 09:00 MSK (06:00 UTC)
SELECT cron.schedule(
  'send-daily-notifications',
  '0 6 * * *',
  $$
  SELECT net.http_post(
    url := 'https://your-project.supabase.co/functions/v1/send-notifications',
    headers := '{"Authorization": "Bearer your-cron-secret"}'::jsonb
  )
  $$
);
```

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
subfi-project/
â”œâ”€â”€ frontend/                 # React Mini App
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/       # UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ hooks/            # React Ñ…ÑƒĞºĞ¸
â”‚   â”‚   â”‚   â””â”€â”€ useSubfi.ts   # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ñ…ÑƒĞº
â”‚   â”‚   â”œâ”€â”€ utils/            # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
â”‚   â”‚   â””â”€â”€ App.jsx           # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ supabase/
â”‚   â”‚   â”œâ”€â”€ migrations/       # SQL Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”‚   â””â”€â”€ functions/        # Edge Functions
â”‚   â”‚       â”œâ”€â”€ telegram-auth/
â”‚   â”‚       â””â”€â”€ send-notifications/
â”‚   â”‚
â”‚   â””â”€â”€ bot/                  # grammY Ğ±Ğ¾Ñ‚
â”‚       â”œâ”€â”€ index.ts
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ Dockerfile
â”‚
â””â”€â”€ docs/                     # Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
```

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

- **RLS (Row Level Security)** â€” ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ²Ğ¾Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
- **HMAC-SHA256** â€” Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ initData Ğ¾Ñ‚ Telegram
- **JWT Ñ‚Ğ¾ĞºĞµĞ½Ñ‹** â€” Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğº API
- **Webhook ÑĞµĞºÑ€ĞµÑ‚** â€” Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ğ° Ğ±Ğ¾Ñ‚Ğ°

## ğŸ’° Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½ | ĞŸÑ€Ğ¸ 10k Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ |
|-----------|-----------------|----------------------|
| Supabase  | 500 MB Ğ‘Ğ”, 50k Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² | ~$25/Ğ¼ĞµÑ |
| Vercel    | Unlimited static | $0 |
| Railway   | $5 ĞºÑ€ĞµĞ´Ğ¸Ñ‚/Ğ¼ĞµÑ | ~$5-10/Ğ¼ĞµÑ |
| **Ğ˜Ñ‚Ğ¾Ğ³Ğ¾** | **~$5/Ğ¼ĞµÑ** | **~$35-40/Ğ¼ĞµÑ** |

## ğŸ“± Ğ¡ĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚Ñ‹

<p align="center">
  <img src="docs/screenshot-1.png" alt="Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ÑĞºÑ€Ğ°Ğ½" width="200"/>
  <img src="docs/screenshot-2.png" alt="ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ" width="200"/>
  <img src="docs/screenshot-3.png" alt="Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ" width="200"/>
</p>

## ğŸ¤ Contributing

1. Fork Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ
2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ feature branch (`git checkout -b feature/amazing-feature`)
3. Commit Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ (`git commit -m 'Add amazing feature'`)
4. Push Ğ² branch (`git push origin feature/amazing-feature`)
5. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Pull Request

## ğŸ“„ Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

MIT License â€” Ğ´ĞµĞ»Ğ°Ğ¹Ñ‚Ğµ Ñ‡Ñ‚Ğ¾ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ ğŸš€

---

<p align="center">
  Made with â¤ï¸ for Telegram
</p>
